<div class="entityCommentForm">
  <div ng-switch="vm.isAuthenticated">

    <div ng-switch-when="true">
      <div class="row comment-form">
        <div class="col-xs-12">
          <form class="form-horizontal" name="vm.commentForm">
            <!-- TODO: implement hit-return-to-submit behavior with this: <input ng-keyup="$event.keyCode == 13 ? myFunc() : null" ...> from http://stackoverflow.com/questions/15417125/submit-form-on-pressing-enter-with-angularjs -->
            <formly-form
              options="vm.options"
              model="vm.newComment"
              fields="vm.newCommentFields"
              ng-submit="vm.submit(vm.newComment, vm.options.resetModel())">
            </formly-form>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-11 col-xs-offset-1">
          <div class="pull-left markdown-prompt">
            <p>Use
              <button type="button" class="btn btn-default btn-xs"
                      ng-click="vm.showMarkdownHelp = !vm.showMarkdownHelp">
                <span class="glyphicon"
                      aria-hidden="true"
                      ng-class="{ 'glyphicon-triangle-right': vm.showMarkdownHelp === false, 'glyphicon-triangle-bottom': vm.showMarkdownHelp === true}">
                </span>
                markdown
              </button>
              to add <strong>emphasis</strong>, <span style="font-style: oblique;">styling</span>, images, and links to your comments.</p>
          </div>
          <div class="pull-right">
            <button
              type="submit"
              class="btn btn-default"
              ng-disabled="vm.commentForm.$invalid"
              ng-click="vm.submit(vm.newComment, vm.options.resetModel)">
              Submit Comment
            </button>
          </div>
        </div>
      </div>
      <div class="row" ng-show="vm.showMarkdownHelp">
        <div class="col-xs-12">
          <div ng-include="'app/views/events/common/entityCommentMarkdownHelp.tpl.html'"></div>
        </div>
      </div>
    </div>

    <div ng-switch-default>
      <div class="row">
        <div class="col-xs-12">
          <p><strong>Please Sign In to post comments.</strong></p>
        </div>
      </div>
    </div>

  </div>
  <!--<hr/>-->
  <!--<h3>vm.commentForm</h3>-->
  <!--<pre ng-bind="vm.commentForm|json"></pre>-->
  <!--<hr/>-->
  <!--<h3>vm.commentFormFields</h3>-->
  <!--<pre ng-bind="vm.newCommentFields|json"></pre>-->
</div>
