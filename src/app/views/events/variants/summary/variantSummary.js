(function() {
  'use strict';
  angular.module('civic.events.variants')
    .controller('VariantSummaryController', VariantSummaryController)
    .directive('variantSummary', function() {
      return {
        restrict: 'E',
        scope: {
          showEvidenceGrid: '='
        },
        controller: 'VariantSummaryController',
        templateUrl: 'app/views/events/variants/summary/variantSummary.tpl.html'
      };
    });

  //@ngInject
  function VariantSummaryController($scope,
                                    $state,
                                    $stateParams,
                                    Security,
                                    Variants,
                                    VariantsViewOptions) {
    $scope.isAuthenticated = Security.isAuthenticated;
    $scope.isEdit = $state.includes('**.edit.**');
    $scope.stateParams = $stateParams;

    $scope.variant = Variants.data.item;
    $scope.evidence = Variants.data.evidence;

    $scope.$watch(function() { return Variants.data.item; }, function(variant) {
      $scope.variant = variant;
      //$scope.variant.variant_types = [{"id":1,"name":"silent_mutation","display_name":"Silent Mutation","so_id":"SO:0001017","description":"A sequence variant that does not affect protein function. Silent mutations may occur in genic ( CDS, UTR, intron etc) and intergenic regions. Silent mutations may have affects on processes such as splicing and regulation.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001017"},{"id":2,"name":"functional_variant","display_name":"Functional Variant","so_id":"SO:0001536","description":"A sequence variant in which the function of a gene product is altered with respect to a reference.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001536"},{"id":3,"name":"structural_variant","display_name":"Structural Variant","so_id":"SO:0001537","description":"A sequence variant that changes one or more sequence features.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001537"},{"id":4,"name":"transcript_function_variant","display_name":"Transcript Function Variant","so_id":"SO:0001538","description":"A sequence variant which alters the functioning of a transcript with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001538"},{"id":5,"name":"translational_product_function_variant","display_name":"Translational Product Function Variant","so_id":"SO:0001539","description":"A sequence variant that affects the functioning of a translational product with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001539"},{"id":6,"name":"level_of_transcript_variant","display_name":"Level Of Transcript Variant","so_id":"SO:0001540","description":"A sequence variant which alters the level of a transcript.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001540"},{"id":7,"name":"decreased_transcript_level_variant","display_name":"Decreased Transcript Level Variant","so_id":"SO:0001541","description":"A sequence variant that increases the level of mature, spliced and processed RNA with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001541"},{"id":8,"name":"increased_transcript_level_variant","display_name":"Increased Transcript Level Variant","so_id":"SO:0001542","description":"A sequence variant that increases the level of mature, spliced and processed RNA with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001542"},{"id":9,"name":"transcript_processing_variant","display_name":"Transcript Processing Variant","so_id":"SO:0001543","description":"A sequence variant that affects the post transcriptional processing of a transcript with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001543"},{"id":10,"name":"editing_variant","display_name":"Editing Variant","so_id":"SO:0001544","description":"A transcript processing variant whereby the process of editing is disrupted with respect to the reference.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001544"},{"id":11,"name":"polyadenylation_variant","display_name":"Polyadenylation Variant","so_id":"SO:0001545","description":"A sequence variant that changes polyadenylation with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001545"},{"id":12,"name":"transcript_stability_variant","display_name":"Transcript Stability Variant","so_id":"SO:0001546","description":"A variant that changes the stability of a transcript with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001546"},{"id":13,"name":"decreased_transcript_stability_variant","display_name":"Decreased Transcript Stability Variant","so_id":"SO:0001547","description":"A sequence variant that decreases transcript stability with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001547"},{"id":14,"name":"increased_transcript_stability_variant","display_name":"Increased Transcript Stability Variant","so_id":"SO:0001548","description":"A sequence variant that increases transcript stability with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001548"},{"id":15,"name":"transcription_variant","display_name":"Transcription Variant","so_id":"SO:0001549","description":"A variant that changes alters the transcription of a transcript with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001549"},{"id":16,"name":"rate_of_transcription_variant","display_name":"Rate Of Transcription Variant","so_id":"SO:0001550","description":"A sequence variant that changes the rate of transcription with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001550"},{"id":17,"name":"increased_transcription_rate_variant","display_name":"Increased Transcription Rate Variant","so_id":"SO:0001551","description":"A sequence variant that increases the rate of transcription with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001551"},{"id":18,"name":"decreased_transcription_rate_variant","display_name":"Decreased Transcription Rate Variant","so_id":"SO:0001552","description":"A sequence variant that decreases the rate of transcription with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001552"},{"id":19,"name":"translational_product_level_variant","display_name":"Translational Product Level Variant","so_id":"SO:0001553","description":"A functional variant that changes the translational product level with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001553"},{"id":20,"name":"polypeptide_function_variant","display_name":"Polypeptide Function Variant","so_id":"SO:0001554","description":"A sequence variant which changes polypeptide functioning with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001554"},{"id":21,"name":"decreased_translational_product_level","display_name":"Decreased Translational Product Level","so_id":"SO:0001555","description":"A sequence variant which decreases the translational product level with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001555"},{"id":22,"name":"increased_translational_product_level","display_name":"Increased Translational Product Level","so_id":"SO:0001556","description":"A sequence variant which increases the translational product level with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001556"},{"id":23,"name":"polypeptide_gain_of_function_variant","display_name":"Polypeptide Gain Of Function Variant","so_id":"SO:0001557","description":"A sequence variant which causes gain of polypeptide function with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001557"},{"id":24,"name":"polypeptide_localization_variant","display_name":"Polypeptide Localization Variant","so_id":"SO:0001558","description":"A sequence variant which changes the localization of a polypeptide with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001558"},{"id":25,"name":"polypeptide_loss_of_function_variant","display_name":"Polypeptide Loss Of Function Variant","so_id":"SO:0001559","description":"A sequence variant that causes the loss of a polypeptide function with respect to a reference sequence.","url":"http://www.sequenceontology.org/browser/current_svn/term/SO:0001559"}];
      $scope.evidence = variant.evidence_items;
    }, true);

    $scope.VariantsViewOptions = VariantsViewOptions;
    $scope.backgroundColor = VariantsViewOptions.styles.view.backgroundColor;

    $scope.editClick = function() {
      if (Security.isAuthenticated()) {
        $state.go('events.genes.summary.variants.edit.basic', $stateParams);
      }
    };

  }
})();
